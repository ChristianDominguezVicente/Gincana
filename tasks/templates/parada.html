<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<div class="modal-dialog modal-xl" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">Modal title</h2>
      <button style="float: right;" type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">

      <div id="map2" style="height: 600px; width: 700px;"></div>

      {{ paradas|json_script:"paradas_json" }}

      <script>
        var map = L.map('map2').setView([51.505, -0.09], 13);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        map.invalidateSize();

        let paradas2 = JSON.parse(document.getElementById('paradas_json').textContent)

        paradas2.forEach(parada =>{
            L.marker([parada.latitud, parada.longitud]).addTo(map)
        })

        map.on('click', (event) => {
          L.marker([event.latlng.lat, event.latlng.lng]).addTo(map)
        })

      </script>

    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      <button type="submit" class="btn btn-primary">Save changes</button>
    </div>
  </div>
</div>